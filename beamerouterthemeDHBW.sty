\mode<presentation>

% Options

\def\beamer@dhbw@header{true}
\DeclareOptionBeamer{header}{\def\beamer@dhbw@header{#1}}

\def\beamer@dhbw@footer{true}
\DeclareOptionBeamer{footer}{\def\beamer@dhbw@footer{#1}}

\def\beamer@dhbw@true{true}
\ProcessOptionsBeamer

% Variables

\newlength{\headerheight}
\ifx\beamer@dhbw@header\beamer@dhbw@true
  \setlength{\headerheight}{3.5ex}
\else
  \setlength{\headerheight}{0ex}
\fi

\newlength{\footerheight}
\ifx\beamer@dhbw@footer\beamer@dhbw@true
  \setlength{\footerheight}{2ex}
\else
  \setlength{\footerheight}{0ex}
\fi

\newlength{\lrskip}
\setlength{\lrskip}{1ex}

% Mini Frame Navigation

% additional vskip fix
\newlength{\minifix}
\setlength{\minifix}{0pt}

% uncomment one of following to show mini frames
% \setbeamertemplate{mini frames}[default]
% \setbeamertemplate{mini frames}[box]
% \setbeamertemplate{mini frames}[tick]

% uncomment this to hide mini frames
\setbeamertemplate{mini frames}{}
\setlength{\minifix}{1pt}
\ifx\beamer@dhbw@header\beamer@dhbw@true
  \setlength{\headerheight}{\footerheight}
\fi

% Templates

\setbeamertemplate{headline}
{
  \ifx\beamer@dhbw@header\beamer@dhbw@true

  \leavevmode

  \begin{beamercolorbox}[wd=\paperwidth,ht=\headerheight,dp=0pt]{headline}
    \vbox to \headerheight
    {
      \vfil
      {
        \vskip\minifix
        \beamer@compresstrue
        \insertnavigation{\textwidth}
      }
      \vfil
    }
  \end{beamercolorbox}

  \fi
}

\setbeamertemplate{footline}
{
  \ifx\beamer@dhbw@footer\beamer@dhbw@true

  \leavevmode

  \begin{beamercolorbox}[wd=\paperwidth,ht=\footerheight,leftskip=\lrskip,rightskip=3\lrskip,dp=0pt]{footline}
    \vbox to \footerheight
    {
      \vfil
      {
        \insertshortinstitute[width=0.125\paperwidth]{}\hfill
        \insertshorttitle{} / \insertshortsubtitle{}\hfill
        \insertshortdate[center,width=0.125\paperwidth]{}\hfill
        \insertframenumber{} / \inserttotalframenumber{}
      }
      \vfil
    }
  \end{beamercolorbox}

  \fi
}

\mode<all>
